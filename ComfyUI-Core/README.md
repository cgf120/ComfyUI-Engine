# ComfyUI-Core

**æç®€ComfyUIè¿è¡Œæ—¶å¹³å° - æ— å†…ç½®èŠ‚ç‚¹ç‰ˆæœ¬**

## ğŸ¯ æ¦‚è¿°

ComfyUI-Coreæ˜¯ComfyUIçš„æç®€è¿è¡Œæ—¶ç‰ˆæœ¬ï¼ŒåŒ…å«ï¼š
- âœ… å®Œæ•´çš„WebæœåŠ¡å™¨å’ŒAPI
- âœ… å·¥ä½œæµæ‰§è¡Œå¼•æ“
- âœ… WebSocketå®æ—¶é€šä¿¡
- âœ… æ¨¡å‹ç®¡ç†å’Œè®¾å¤‡ç®¡ç†
- âŒ **é›¶å†…ç½®èŠ‚ç‚¹** - æ‰€æœ‰åŠŸèƒ½é€šè¿‡èŠ‚ç‚¹åŒ…æä¾›

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### 2. å¯åŠ¨æœåŠ¡å™¨
```bash
python main.py
```

æœåŠ¡å™¨å°†åœ¨ http://127.0.0.1:8188 å¯åŠ¨ï¼Œä½†**èŠ‚ç‚¹é¢æ¿ä¸ºç©º**ã€‚

### 3. å®‰è£…èŠ‚ç‚¹åŒ…
```bash
# å®‰è£…åŸºç¡€èŠ‚ç‚¹åŒ…
pip install comfy-core-nodes
install-comfy-core-nodes

# é‡å¯æœåŠ¡å™¨ï¼Œç°åœ¨å°±æœ‰å®Œæ•´çš„ComfyUIåŠŸèƒ½äº†
python main.py
```

## ğŸ“¦ å¯ç”¨èŠ‚ç‚¹åŒ…

| åŒ…å | åŠŸèƒ½ | å¤§å° |
|------|------|------|
| `comfy-core-nodes` | åŸºç¡€èŠ‚ç‚¹ (CheckpointLoader, KSamplerç­‰) | ~500MB |
| `comfy-controlnet-nodes` | ControlNetåŠŸèƒ½ | ~100MB |
| `comfy-lora-nodes` | LoRAæ”¯æŒ | ~50MB |
| `comfy-3d-nodes` | 3Dæ¨¡å‹å¤„ç† | ~100MB |
| `comfy-audio-nodes` | éŸ³é¢‘å¤„ç† | ~150MB |

## ğŸ§ª æµ‹è¯•

### æµ‹è¯•åŸºç¡€åŠŸèƒ½
```bash
python test_startup.py
```

### æµ‹è¯•æœåŠ¡å™¨å¯åŠ¨
```bash
# ç»ˆç«¯1: å¯åŠ¨æœåŠ¡å™¨
python test_server.py

# ç»ˆç«¯2: æµ‹è¯•API
python test_api.py
```

## ğŸ“Š ä½“ç§¯å¯¹æ¯”

```
åŸç‰ˆComfyUI:     ~2GB   (åŒ…å«æ‰€æœ‰èŠ‚ç‚¹å’Œæ¨¡å‹)
ComfyUI-Core:    ~50MB  (åªæœ‰è¿è¡Œæ—¶)
+ åŸºç¡€èŠ‚ç‚¹åŒ…:     +500MB (æŒ‰éœ€å®‰è£…)
```

## ğŸ”§ å¼€å‘

### ç›®å½•ç»“æ„
```
ComfyUI-Core/
â”œâ”€â”€ main.py              # å¯åŠ¨å…¥å£
â”œâ”€â”€ server.py            # WebæœåŠ¡å™¨
â”œâ”€â”€ execution.py         # æ‰§è¡Œå¼•æ“
â”œâ”€â”€ nodes.py             # ç©ºèŠ‚ç‚¹æ³¨å†Œè¡¨
â”œâ”€â”€ comfy/               # æ ¸å¿ƒè¿è¡Œæ—¶
â”œâ”€â”€ custom_nodes/        # èŠ‚ç‚¹åŒ…å®‰è£…ç›®å½•
â””â”€â”€ requirements.txt     # æœ€å°ä¾èµ–
```

### æ·»åŠ è‡ªå®šä¹‰èŠ‚ç‚¹
1. å°†èŠ‚ç‚¹åŒ…å®‰è£…åˆ° `custom_nodes/` ç›®å½•
2. é‡å¯æœåŠ¡å™¨è‡ªåŠ¨åŠ è½½

## ğŸ¯ è®¾è®¡ç†å¿µ

- **æç®€æ ¸å¿ƒ**: åªåŒ…å«è¿è¡Œæ—¶å¿…éœ€åŠŸèƒ½
- **æŒ‰éœ€æ‰©å±•**: é€šè¿‡èŠ‚ç‚¹åŒ…æ·»åŠ åŠŸèƒ½
- **å®Œå…¨å…¼å®¹**: æ”¯æŒæ‰€æœ‰ç°æœ‰å·¥ä½œæµå’Œæ’ä»¶
- **é›¶ç ´å**: ç°æœ‰å¼€å‘æ–¹å¼ç»§ç»­æœ‰æ•ˆ

## ğŸ“ APIå…¼å®¹æ€§

æ‰€æœ‰ComfyUI APIç«¯ç‚¹å®Œå…¨å…¼å®¹ï¼š
- `/object_info` - è¿”å›å·²å®‰è£…èŠ‚ç‚¹ä¿¡æ¯
- `/prompt` - å·¥ä½œæµæäº¤
- `/queue` - é˜Ÿåˆ—ç®¡ç†
- `/history` - æ‰§è¡Œå†å²
- `/system_stats` - ç³»ç»ŸçŠ¶æ€

## ğŸ”— ç›¸å…³é¡¹ç›®

- [ComfyUI-Core-Frontend](../ComfyUI-Core-Frontend/) - é…å¥—å‰ç«¯
- [comfy-core-nodes](https://pypi.org/project/comfy-core-nodes/) - åŸºç¡€èŠ‚ç‚¹åŒ…
- [ComfyUI Manager](https://github.com/ltdrdata/ComfyUI-Manager) - èŠ‚ç‚¹åŒ…ç®¡ç†å™¨